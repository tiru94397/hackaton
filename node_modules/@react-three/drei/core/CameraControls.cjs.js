"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),t=require("three"),r=require("react"),n=require("@react-three/fiber"),o=require("camera-controls");function a(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function s(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var u=a(e),c=s(t),l=s(r),d=a(o);const i=r.forwardRef(((e,t)=>{r.useMemo((()=>{d.default.install({THREE:c}),n.extend({CameraControlsImpl:d.default})}),[]);const{camera:o,domElement:a,onStart:s,onEnd:i,onChange:f,events:m,regress:v,...b}=e,E=n.useThree((e=>e.camera)),p=n.useThree((e=>e.gl)),h=n.useThree((e=>e.invalidate)),j=n.useThree((e=>e.events)),g=n.useThree((e=>e.setEvents)),O=n.useThree((e=>e.performance)),T=o||E,L=a||j.connected||p.domElement,q=r.useMemo((()=>new d.default(T)),[T]);return n.useFrame(((e,t)=>{q.enabled&&q.update(t)}),-1),r.useEffect((()=>(q.connect(L),()=>{q.disconnect()})),[L,q]),l.useEffect((()=>{m&&g({enabled:!0});const e=e=>{h(),v&&O.regress(),f&&f(e)},t=e=>{s&&s(e),m||g({enabled:!1})},r=e=>{i&&i(e),m||g({enabled:!0})};return q.addEventListener("control",e),q.addEventListener("controlstart",t),q.addEventListener("controlend",r),()=>{q.removeEventListener("control",e),q.removeEventListener("controlstart",t),q.removeEventListener("controlend",r)}}),[q,m,s,i,h,g,v,f]),l.createElement("primitive",u.default({ref:t,object:q},b))}));exports.CameraControls=i;
